---
import {Footnote} from "../components/Footnote";
import {NowBlock} from "../components/Now";
import { getCollection } from 'astro:content';
import SocialMediaLinks from "../components/SocialMediaLinks.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import {CreationsView} from "../components/views/CreationsView";
import Trinkets from "../components/Trinkets.astro";

const location = await fetch("https://status.spencerchang.me/api/metadata").then((res) => res.json());

const creations = (await getCollection('creation')).filter(c => (Boolean(c.data.heroImage) && c.data.featured) || (c.data.isEvent && c.data.forthcoming)).sort(
	(a, b) => 
  // sort forthcoming first and then by date
  a.data.forthcoming === b.data.forthcoming ? new Date(b.data.date).getTime() - new Date(a.data.date).getTime() : a.data.forthcoming ? -1 : 1
);
---

<BaseLayout includeMarquee={true}>
  <div class="two-columns">
    <div class="headerContainer home textContent">
      <!-- TODO(spencer): insert kaleidescope here? -->
      <!-- <h1 id="siteTitle" title="hi! hover around other parts of the site and you might find other hidden treasures.">
        spencer chang
        <PersonalEmoji/>
      </h1> -->
      <div class="textContent">
        <p>Hi, I'm Spencer. Welcome to my internet home.</p>
        <img
  class="lamp"
  id="lamp-akari"
  src="/assets/noguchi-akari-1at.png"
  can-toggle
  title="this is one of my favorite Noguchi lamps..."
/>
      <p>I'm interested in making communal computers<Footnote client:only="react" hoverImg="/footnotes/people-and-computers.png" caption='My independent practice is focused around the idea of "communal computing," or computing that is made by _us_ for _us_. You can read more in this [interview I did with Are.na](https://www.are.na/editorial/an-interview-with-spencer-chang)'></Footnote> that gather people around play, connection, and creation. I'm an indie engineer, artist, and designer making things like open-source infrastructure<Footnote client:only="react"  caption="for making a more handmade and cared for internet"></Footnote>, small apps<Footnote client:only="react" imageSrc="https://codaio.imgix.net/docs/_ObKm8enqO/blobs/bl-CNxtIJ2qWy/e32bd526c5d5feb83e8b5132510677bba717ef5e04a8080c9f259bf66da3e261ab189aaa3a664fee6951b90a14a6d839fdaa2140456cc162a86c5fd326ce3bbc7cb24ab66363b1b9ea9b40e1802a5cff3bc9f72f9dc02488e129321442ddbcf166665982?auto=format%2Ccompress&fit=max&w=1000" caption="an <a href='/creation/gather'>app</a> for recording your curiosities" isHtmlCaption></Footnote>, internet art<Footnote client:only="react" imageSrc="/footnotes/botanus-still-transparent.png" hoverImg="/footnotes/botanus-still.png" isHtmlCaption caption="from my internet <a href='/creation/html-garden'>garden</a>"></Footnote>, and computing-infused objects<Footnote client:only="react" imageSrc="/footnotes/sigil-ii-transparent.png" hoverImg="https://codaio.imgix.net/docs/_ObKm8enqO/blobs/bl-_oF1Z2Cgv5/e2a2a3580891820d7a19c46bd907160948e125676cfd4be0f8a81157b18658759233817d582444e29b30c85aaa5783c5f8d2c7fa50b10745d3f018281dd93fcd74b20753b513074257bfd9b23f29533d83d514e670112b2a9d12bf5adfa679d81fd056f0?auto=format%2Ccompress&fit=max&w=400" caption="the webstone I carry around to hold this very website (read about <a href='https://spencerchang.substack.com/p/touching-computers'>it here</a>)!" isHtmlCaption ></Footnote>.</p>
      <p>In all I do, I try to be an "internet caretaker"<Footnote client:only="react" url="https://www.naiveweekly.com/p/url-poetry-club?publication_id=3348&post_id=136896792&isFreemail=true&r=2037y"></Footnote>, stewarding the internet towards a space that enables us to not only love & support each other but also create & dream together.</p>
      <p>My work is supported by my generous <a href="/support">sponsors</a>.</p>
          <div class="signature">
            <div class="signatureContent" style="margin-left:auto">
          <!-- TODO: hover over for photo in lil modal? -->
          <div class="serif">Spencer 張正 Chang<br/>spencerc99@gmail.com</div>
          <img can-spin id="stamp" class="stamp" src="/assets/name-stamp.png" title="this is my name stamp. my chinese name is 張正, 正 being my given name. 正 has many meanings: just, right, 5 if marking tallies on a food ordering sheet, proper, main, positive (for numbers). this animation was made on winter solstice and inspired by the scene from avatar the last airbender where aang opens the door to visit avatar roku during the winter solstice."/>
          <SocialMediaLinks/>
          </div>
        </div>
        <br/>
        <NowBlock client:only="react"/>
        <div class="hideMedium">        <p>Below, you'll find my selection of live furniture. Visitors can change them, and I'll move them around every time I visit my website. The more of a regular you are, you might 
          just find that you get extra privileges with these items...</p>
        </br>
        <Trinkets/></div>
      </div>
    </div>
    <!-- BODY -->
    <!-- TODO: replace this with kaleidoscope or feral.earth stuff -->
    <CreationsView creations={creations} description={'selected'} client:only="react"/>
    <!-- <div>        <p>Below, you'll find my selection of live furniture. Visitors can change them, and I'll move them around every time I visit my website. The more of a regular you are, you might 
          just find that you get extra privileges with these items...</p>
        </br>
        <Trinkets/></div> -->
        </div>
  </div>
<!-- window embeds -->
<!-- TODO: need to fix scroll hijacking and the perf -->
<!-- <div class="window" style="left: 1%; top:23%;"><iframe src="https://spencerchang.me/window#sky"></iframe></div>
<div class="window" style="right: 2%; top:23%;"><iframe src="https://spencerchang.me/window#selfie"></iframe></div>
<div class="window" style="left: 2.5%; top:73%;"><iframe src="https://spencerchang.me/window#vignette"></iframe></div> -->
</BaseLayout>
